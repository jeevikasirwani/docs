import { Tag } from '@/components/Tag'

<Tag variant="small">ACCESS CONTROL</Tag>

# Roles

Roles in Phase define the level of access and permissions granted to users within an organization. They determine what actions a user can perform and what resources they can access. Phase offers both managed roles with predefined permissions and the ability to create custom roles for more specific access control needs.

## Applying Roles to Users

To assign a role to a user or change a user's role:

1. Navigate to the Access Control page from the sidebar and click on the Members tab.
![1-navigate-to-access-control](/assets/images/console/access-control/roles/create-custom-roles/1-navigate-to-access-control.png)
2. Find the user whose role you want to update.
3. Click on the user's current role next to their name to open the role selection dropdown.
4. Choose the desired role from the list of available roles.
![2-switch-role](/assets/images/console/access-control/roles/switch-user-role/2-switch-role.png)
5. Confirm the change.

## Managed Roles

Phase provides managed roles out of the box to every organization.

### Owner

The organization owner. This role is automatically assigned when a user creates a new organization. It is unique to a single user and grants access to all resources and actions.

#### Organization-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Organisation** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Billing** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Apps** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Members** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Service Accounts** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Roles** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Integration Credentials** | Full access | ✅ | ✅ | ✅ | ✅ |

#### App-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Environments** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Secrets** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Lockbox** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Logs** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Tokens** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Members** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Integrations** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Encryption Mode** | Full access | ✅ |  | ✅ |  |

### Admin

Admin users have access to most resources and permissions, and have global access to all Apps and Environments.

#### Organization-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Organisation** | Custom access | ✅ | ❌ | ✅ | ❌ |
| **Billing** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Apps** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Members** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Service Accounts** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Roles** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Integration Credentials** | Full access | ✅ | ✅ | ✅ | ✅ |

#### App-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Environments** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Secrets** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Lockbox** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Logs** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Tokens** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Members** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Integrations** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Encryption Mode** | Custom access | ✅ |  | ✅ |  |

The `Owner` and `Admin` roles have global access. Learn more about global access [here](/access-control#global-access).

### Developer

Developers have limited permissions at the organization level and must be given explicit access to Apps and Environments.

#### Organization-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Organisation** | No access | ❌ | ❌ | ❌ | ❌ |
| **Billing** | No access | ❌ | ❌ | ❌ | ❌ |
| **Apps** | Read access | ✅ | ❌ | ❌ | ❌ |
| **Members** | Read access | ✅ | ❌ | ❌ | ❌ |
| **Service Accounts** | No access | ❌ | ❌ | ❌ | ❌ |
| **Roles** | Read access | ✅ | ❌ | ❌ | ❌ |
| **Integration Credentials** | Custom access | ✅ | ✅ | ✅ | ❌ |

#### App-level permissions:

| Resource | Access | Read | Create | Update | Delete |
|----------|--------|------|--------|--------|--------|
| **Environments** | Custom access | ✅ | ✅ | ✅ | ❌ |
| **Secrets** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Lockbox** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Logs** | Read access | ✅ | ❌ | ❌ | ❌ |
| **Tokens** | Custom access | ✅ | ✅ | ❌ | ❌ |
| **Members** | Read access | ✅ | ❌ | ❌ | ❌ |
| **Integrations** | Full access | ✅ | ✅ | ✅ | ✅ |
| **Encryption Mode** | Custom access | ✅ |  | ✅ |  |

## Custom Roles

<Note>
 The ability to create and manage custom roles is available for organizations with a `Phase Pro` or `Enterprise` tier subscription.
</Note>

In addition to the managed roles, Phase allows you to create custom roles tailored to your organization's specific security needs.

### Creating Custom Roles

<Warning>
Please make sure to follow the [Principle of least privilege](https://en.wikipedia.org/wiki/Principle_of_least_privilege) when setting the access policy for roles. Casting a wider scope may inadvertently lead to [Privilege escalation](https://en.wikipedia.org/wiki/Privilege_escalation). 
</Warning>

1. Navigate to the Access Control page from the sidebar and click on the Roles tab.
![1-navigate-to-access-control](/assets/images/console/access-control/roles/create-custom-roles/1-navigate-to-access-control.png)
![2-navigate-to-access-control-roles](/assets/images/console/access-control/roles/create-custom-roles/2-navigate-to-access-control-roles.png)
2. Click on "Create Role".
![3-click-create-role](/assets/images/console/access-control/roles/create-custom-roles/3-click-create-role.png)
3. Provide a name and description for the role. (Role name is mandatory)
![4-create-a-new-role](/assets/images/console/access-control/roles/create-custom-roles/4-create-a-new-role.png)
4. Expand the Organisation and the App permissions sections by clicking on each of them and select the desired policy permissions by clicking the dropdown for each resource in the Access column and selecting one of the following:
    - 🚫 No access
    - 👁️ Read access
    - ❄️ Full access
    - 📝 Custom access

Alternatively, you may provision a custom access policy by toggling switches in each of the CRUD operations for a given resource.  

5. Save the new role.

### Resource Permissions Cheat Sheet

Some actions require a combination of permissions across multiple resources. Below is a list of common actions that require a combination of two of more permissions:

- To update the role of a user in your Organization: 
    - `Members:update`
    - `Roles:read`
- Adding members to apps / Managing the scope of a members access to environments:
    - `AppMembers:update`
    - `Members:read`
    - `Environments:read`
- to update the third party integration credentials used for a given integration in an app:
    - `Integrations:update`
    - `IntegrationCredentials:read`
- To create an new third party integration inside of an application:
    - `Integrations:create`
    - `Environments:read`
- To create a new service token:
    - `Tokens:create`
    - `Environments:read`
- To enable / disable SSE (Server-side Encryption):
    - `EncryptionMode:update`
    - `Environments:read`
    - Access to all environments in the App

### Editing Custom Roles

1. Navigate to the Access Control tab and click on the Roles section.
![1-navigate-to-access-control](/assets/images/console/access-control/roles/create-custom-roles/1-navigate-to-access-control.png)
![2-navigate-to-access-control-roles](/assets/images/console/access-control/roles/create-custom-roles/2-navigate-to-access-control-roles.png)
2. Find the custom role you want to edit, hover over it and click ⚙️ Manage.
![3-edit-custom-role-click-manage](/assets/images/console/access-control/roles/edit-custom-roles/3-edit-custom-role-click-manage.png)
3. Modify the role as needed.
4. Save your changes.
![4-save-modified-role](/assets/images/console/access-control/roles/edit-custom-roles/4-save-modified-role.png)
